<ion-header>
  <ion-toolbar>
    <ion-title>
      Add Quiz 
    </ion-title>
    <ion-icon slot="end" name="close" (click)="dismissModal()" (ngSubmit)="CreateQuiz()"></ion-icon>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid>
  <form [formGroup]="UpdateQuiz" #localForm = 'ngForm' >   
    <br>
    <ion-row>
      <div>
      <ion-col>
        <ion-label>Quiz Name:</ion-label>
         <ion-input formControlName="quizname" type="text" placeholder="Enter quiz name"></ion-input>
        <span *ngIf="localForm.submitted && UpdateQuiz.controls['quizname'].invalid">*Required</span>
      </ion-col>
    </div>
      </ion-row>
      <select formControlName="updateordelete" (change)="UpdateDeleteOption()">
        <option value="1">Update Existing Questions</option>
        <option value="2">Adding More Questions</option>
      </select>
<br>
            <!-- Updating questions -->
            <ion-row id="Questions" *ngIf="this.UpdateQuiz.get(['updateordelete']).value== 1">
              <div>
              <ion-col>
                <select formControlName="questionChosen" (change)="QuestionChosen()">
                  <option value= null disabled >Select A Question</option>
                  <option  *ngFor="let question of UpdateQuestionBankInfo;let i = index" value="{{i}}">{{question.questions}}</option>
                </select>
                <div *ngIf="questionSelected">
      <br>
              <ion-label>Question:</ion-label>
              <ion-input formControlName="updatequizquestion" type="text" placeholder="Enter a question"></ion-input> 
              <span *ngIf="(localForm.submitted ||ListError) && UpdateQuiz.controls['updatequizquestion'].invalid">*Required</span>
      <br>
              <ion-label>Answer:</ion-label>
               <ion-input formControlName="updatequizanswer"  type="text" placeholder="Enter the answer"></ion-input>
               <span *ngIf="(localForm.submitted ||ListError) && UpdateQuiz.controls['updatequizanswer'].invalid">*Required</span>
      <br>
               <ion-label>Other options:</ion-label>
               <ion-input formControlName="updateoption1"  type="text" placeholder="Enter the answer"></ion-input>
               <span *ngIf="(localForm.submitted ||ListError) && UpdateQuiz.controls['updateoption1'].invalid">*Required</span>
               <br>
               <ion-input formControlName="updateoption2"  type="text" placeholder="Enter the answer"></ion-input>
               <span *ngIf="(localForm.submitted ||ListError) && UpdateQuiz.controls['updateoption2'].invalid">*Required</span>
               <br>
               <ion-input formControlName="updateoption3"  type="text" placeholder="Enter the answer"></ion-input>
               <span *ngIf="(localForm.submitted ||ListError) && UpdateQuiz.controls['updateoption3'].invalid">*Required</span>
               <br>
               <ion-button  (click)="UpdateQuestionBank()">Update</ion-button>
               <ion-button >Delete</ion-button>
              </div>
              </ion-col>
            </div>
              </ion-row>
               <br> <br>
    
      <!-- Adding more question -->
      <ion-row id="Questions" *ngIf="this.UpdateQuiz.get(['updateordelete']).value== 2">
        <div>
        <ion-col >
<br>
        <ion-label>Question:</ion-label>
        <ion-input formControlName="quizquestion" type="text" placeholder="Enter a question"></ion-input> 
        <span *ngIf="(localForm.submitted ||ListError) && UpdateQuiz.controls['quizquestion'].invalid">*Required</span>
<br>
        <ion-label>Answer:</ion-label>
         <ion-input formControlName="quizanswer" type="text" placeholder="Enter the answer"></ion-input>
         <span *ngIf="(localForm.submitted ||ListError) && UpdateQuiz.controls['quizanswer'].invalid">*Required</span>
<br>
         <ion-label>Other options:</ion-label>
         <ion-input formControlName="option1" type="text" placeholder="Enter the answer"></ion-input>
         <span *ngIf="(localForm.submitted ||ListError) && UpdateQuiz.controls['option1'].invalid">*Required</span>
         <br>
         <ion-input formControlName="option2" type="text" placeholder="Enter the answer"></ion-input>
         <span *ngIf="(localForm.submitted ||ListError) && UpdateQuiz.controls['option2'].invalid">*Required</span>
         <br>
         <ion-input formControlName="option3" type="text" placeholder="Enter the answer"></ion-input>
         <span *ngIf="(localForm.submitted ||ListError) && UpdateQuiz.controls['option3'].invalid">*Required</span>
         <br>
         <ion-button  (click)="AddToQuestionBank()">Add</ion-button>
        </ion-col>
      </div>
        </ion-row>
         <br> <br>
         <ion-row>
        <br>
      </ion-row>
        <ion-buttons>
          <ion-button type="submit" (click)="Update()" id="ModalBlueButtons">
            Save changes
          </ion-button>
          <ion-button type="submit" id="ModalRedButtons" (click)="dismissModal()">
            Close
          </ion-button>
        </ion-buttons>
  </form> 
</ion-grid>  
</ion-content>